# AI Chat Application

Полнофункциональное веб-приложение в стиле ChatGPT с поддержкой нескольких AI моделей, генерации изображений и мультимодального ввода.

## Описание проекта

Это современное AI чат-приложение, которое предоставляет пользователям доступ к различным моделям искусственного интеллекта через единый интерфейс с темной темой по умолчанию.

## Основные возможности

### 1. Мультимодельная поддержка
- **GPT-5** - самая продвинутая модель OpenAI
- **GPT-5 Mini** - быстрая и эффективная версия
- **o3-mini** - модель с продвинутым рассуждением
- **Gemini** - мультимодальная модель Google

### 2. Генерация изображений
- Генерация изображений через Gemini Imagen 3
- Интеграция сгенерированных изображений в чат
- Высокое качество результатов

### 3. Мультимодальный ввод
- **Текстовый ввод** - основной способ общения
- **Голосовой ввод** - распознавание речи через Web Speech API
- **Загрузка изображений** - анализ изображений с помощью vision capabilities
- **Загрузка файлов** - обработка PDF и текстовых документов

### 4. Streaming ответов
- Ответы AI отображаются в реальном времени
- Плавная анимация печатания текста
- Индикатор загрузки во время обработки

### 5. История разговоров
- Сохранение всех разговоров в памяти
- Группировка по датам (Сегодня, Вчера, На этой неделе, Ранее)
- Удобное переключение между разговорами

## Технический стек

### Frontend
- **React** с TypeScript
- **Tailwind CSS** для стилизации
- **Shadcn UI** - готовые компоненты
- **React Markdown** - рендеринг markdown
- **Wouter** - роутинг
- **TanStack Query** - управление состоянием сервера

### Backend
- **Express.js** - веб-сервер
- **OpenAI SDK** - интеграция с GPT моделями
- **Google Generative AI SDK** - интеграция с Gemini
- **Multer** - обработка загрузки файлов
- **PDF Parse** - парсинг PDF документов

## Архитектура

### Структура файлов

```
client/
  src/
    components/
      - ThemeProvider.tsx       # Управление темой
      - ThemeToggle.tsx         # Переключатель темы
      - ModelSelector.tsx       # Выбор AI модели
      - ChatMessage.tsx         # Компонент сообщения
      - ChatInput.tsx           # Поле ввода с вложениями
      - VoiceInput.tsx          # Голосовой ввод
      - ImageGenerator.tsx      # Генерация изображений
      - ConversationList.tsx    # Список разговоров
      - AppSidebar.tsx          # Боковая панель
      ui/                       # Shadcn UI компоненты
    pages/
      - Chat.tsx                # Главная страница чата
    lib/
      - api.ts                  # API клиент
      - queryClient.ts          # TanStack Query настройка
    App.tsx                     # Основное приложение
    
server/
  - routes.ts                   # API endpoints
  - storage.ts                  # In-memory хранилище
  - index.ts                    # Express сервер
  
shared/
  - schema.ts                   # Общие типы и схемы
```

### API Endpoints

#### GET /api/conversations
Получение списка всех разговоров

#### POST /api/conversations
Создание нового разговора
```json
{
  "model": "gpt-5" | "gpt-5-mini" | "o3-mini" | "gemini"
}
```

#### DELETE /api/conversations/:id
Удаление разговора

#### POST /api/conversations/:id/messages
Отправка сообщения и получение streaming ответа
- Поддерживает multipart/form-data для файлов
- Возвращает SSE stream для реал-тайм ответов

#### POST /api/generate-image
Генерация изображения через Gemini Imagen
```json
{
  "prompt": "описание изображения"
}
```

## Переменные окружения

Приложение требует следующие секреты:

- `OPENAI_API_KEY` - API ключ OpenAI для доступа к GPT моделям
- `GEMINI_API_KEY` - API ключ Google для Gemini и генерации изображений
- `SESSION_SECRET` - секрет для сессий (уже настроен)

## Особенности реализации

### Темная тема по умолчанию
Приложение автоматически загружается в темной теме с возможностью переключения на светлую.

### Динамическое расширение поля ввода
Поле ввода автоматически расширяется при вводе текста:
- До 50% высоты экрана на десктопе
- До 70% высоты экрана на мобильных устройствах

### Горячие клавиши
- **Ctrl+Enter** - отправка сообщения
- Обычный Enter создает новую строку

### Обработка файлов
- **Изображения** - конвертируются в base64 для отправки к AI
- **PDF** - извлекается текст для анализа
- **Текстовые файлы** - читаются и добавляются к контексту

### Vision Capabilities
Все модели поддерживают анализ изображений:
- Загруженные пользователем изображения
- Сгенерированные изображения
- Изображения из интернета (через URL)

## Запуск проекта

Проект автоматически запускается через workflow "Start application", который выполняет:
```bash
npm run dev
```

Это запускает:
- Express сервер на порту 5000
- Vite dev server для frontend
- Все на одном порту благодаря Vite middleware

## Будущие улучшения

- Персистентное хранилище (PostgreSQL)
- Множественные чат-сессии с поиском
- Экспорт разговоров в различных форматах
- Расширенная поддержка файлов (Excel, архивы)
- Настройка параметров моделей (temperature, max tokens)
- Кастомные system prompts
- Авторизация пользователей
